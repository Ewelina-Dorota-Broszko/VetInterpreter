<div class="dashboard-menu-container">
  <div class="container">
    <h2>Formularz badania krwi</h2>

    <form (ngSubmit)="submitForm()" #bloodForm="ngForm">
      <!-- Morfologia -->
      <fieldset>
        <legend>Morfologia</legend>

        <label>Hemoglobina (g/dL)</label>
        <input type="number" [(ngModel)]="formData.morphology.hemoglobin" name="hemoglobin" min="0" step="0.1" />

        <label>RBC (10¹²/L)</label>
        <input type="number" [(ngModel)]="formData.morphology.rbc" name="rbc" min="0" step="0.01" />

        <label>WBC (10⁹/L)</label>
        <input type="number" [(ngModel)]="formData.morphology.wbc" name="wbc" min="0" step="0.01" />

        <label>Hematokryt (%)</label>
        <input type="number" [(ngModel)]="formData.morphology.hematocrit" name="hematocrit" min="0" step="0.1" />

        <label>Płytki krwi (10⁹/L)</label>
        <input type="number" [(ngModel)]="formData.morphology.platelets" name="platelets" min="0" step="1" />

        <label>MCV (fL)</label>
        <input type="number" [(ngModel)]="formData.morphology.mcv" name="mcv" min="0" step="0.1" />

        <label>MCH (pg)</label>
        <input type="number" [(ngModel)]="formData.morphology.mch" name="mch" min="0" step="0.1" />

        <label>MCHC (g/dL)</label>
        <input type="number" [(ngModel)]="formData.morphology.mchc" name="mchc" min="0" step="0.1" />
      </fieldset>

      <!-- Biochemia -->
      <fieldset>
        <legend>Biochemia</legend>

        <label>Glukoza (mg/dL)</label>
        <input type="number" [(ngModel)]="formData.biochemistry.glucose" name="glucose" min="0" step="1" />

        <label>Mocznik (mg/dL)</label>
        <input type="number" [(ngModel)]="formData.biochemistry.urea" name="urea" min="0" step="1" />

        <label>Kreatynina (mg/dL)</label>
        <input type="number" [(ngModel)]="formData.biochemistry.creatinine" name="creatinine" min="0" step="0.1" />

        <label>ALT (U/L)</label>
        <input type="number" [(ngModel)]="formData.biochemistry.alt" name="alt" min="0" step="1" />

        <label>AST (U/L)</label>
        <input type="number" [(ngModel)]="formData.biochemistry.ast" name="ast" min="0" step="1" />

        <label>ALP (U/L)</label>
        <input type="number" [(ngModel)]="formData.biochemistry.alp" name="alp" min="0" step="1" />

        <label>Białko całkowite (g/dL)</label>
        <input type="number" [(ngModel)]="formData.biochemistry.totalProtein" name="totalProtein" min="0" step="0.1" />

        <label>Albuminy (g/dL)</label>
        <input type="number" [(ngModel)]="formData.biochemistry.albumin" name="albumin" min="0" step="0.1" />

        <label>Globuliny (g/dL)</label>
        <input type="number" [(ngModel)]="formData.biochemistry.globulin" name="globulin" min="0" step="0.1" />

        <label>Bilirubina całkowita (mg/dL)</label>
        <input type="number" [(ngModel)]="formData.biochemistry.bilirubinTotal" name="bilirubinTotal" min="0" step="0.1" />

        <label>Bilirubina bezpośrednia (mg/dL)</label>
        <input type="number" [(ngModel)]="formData.biochemistry.bilirubinDirect" name="bilirubinDirect" min="0" step="0.1" />

        <label>Bilirubina pośrednia (mg/dL)</label>
        <input type="number" [(ngModel)]="formData.biochemistry.bilirubinIndirect" name="bilirubinIndirect" min="0" step="0.1" />
      </fieldset>

      <!-- Inne -->
      <fieldset>
        <legend>Inne</legend>

        <label>Data badania</label>
        <input type="date" [(ngModel)]="formData.other.testDate" name="testDate" required />

        <label>Komentarze</label>
        <textarea [(ngModel)]="formData.other.comments" name="comments" rows="3"></textarea>
      </fieldset>

      <button type="submit" [disabled]="saving">
        {{ saving ? 'Zapisywanie…' : 'Zapisz badanie krwi' }}
      </button>

      <p class="ok" *ngIf="okMsg">{{ okMsg }}</p>
      <p class="error" *ngIf="error">{{ error }}</p>
    </form>
  </div>
</div>
