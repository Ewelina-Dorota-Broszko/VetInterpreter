<div class="dashboard-menu-container">
    <div class="container">
        <h2>Wiadomości – weterynarz</h2>

        <h3>Oczekujące prośby</h3>
        <div *ngFor="let r of requests">
            <span>{{ r.owner?.name }} • {{ r.createdAt | date:'yyyy-MM-dd HH:mm' }}</span>
            <button (click)="accept(r.id)">Akceptuj (3 dni)</button>
            <button (click)="decline(r.id)">Odrzuć</button>
        </div>

        <h3>Rozmowy</h3>
        <table>
            <tr>
                <th>Klient</th>
                <th>Status</th>
                <th>Akcja</th>
            </tr>
            <tr *ngFor="let t of threads">
                <td>{{ t.owner?.name || t.owner?.email }}</td>
                <td>{{ t.status }} <ng-container *ngIf="t.windowTo"> (do {{ t.windowTo | date:'yyyy-MM-dd HH:mm'
                        }})</ng-container></td>
                <td><button (click)="openChat(t)">Otwórz czat</button></td>
            </tr>
        </table>

        <div class="start">
            <h3>Napisz do klienta</h3>
            <input [(ngModel)]="ownerId" placeholder="OwnerId" />
            <input [(ngModel)]="firstText" placeholder="Pierwsza wiadomość (opcjonalnie)" />
            <button (click)="start()">Wyślij</button>
        </div>
    </div>
</div>